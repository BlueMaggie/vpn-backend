let e=document.createElement("style");e.innerHTML=".card-header{display:flex;justify-content:space-between;align-items:center}.text{font-size:14px}.item{margin-bottom:18px}.button{margin-top:30px}",document.head.appendChild(e);import{a as t}from"./axios.5682ea03.js";import{E as o,c as n,w as s,r as a,o as i,a as l,b as d,d as r,e as c,t as h,f as u,v as m,g as p}from"./index.e87a077a.js";var g={name:"ShowLink",data:()=>({message:"",link:"",loading:!0,show:!1,token:"",avatarLink:"http://q2.qlogo.cn/headimg_dl?dst_uin=473211890&spec=100"}),mounted(){this.show=!1,this.loading=!0,t.get("/api/GetNewLink").then((e=>{var t=e.data;this.message=t.message,200==e.data.state?(this.link=t.link,this.token=t.token,this.show=!0,o({title:"获取链接成功",message:"点我复制",type:"success",duration:0,position:"bottom-right",showClose:!1,onclick:()=>{this.Copy()}})):(this.message="出错了",this.link=t.message,o({title:"获取链接失败",type:"error",duration:3e3,position:"bottom-right",showClose:!0}))})).catch((e=>{console.log("Server Internal Error:"+e),this.message="Server Internal Error",this.link="坤坤友情提示:服务器内部错误！",o({title:"获取链接失败",type:"error",duration:3e3,position:"bottom-right",showClose:!0})})).finally((()=>{this.loading=!1}))},methods:{Copy:function(){let e=document.createElement("input");const t=document.activeElement;document.body.appendChild(e),e.value=document.getElementById("link").innerHTML,e.focus(),e.select();try{var n=document.execCommand("copy")}catch(e){n=!1}return n?(o.closeAll(),o({title:"复制成功",message:"",type:"success",duration:1e3,position:"bottom-right",onclick:()=>{this.Copy()}})):(o.closeAll(),o({title:"复制失败",message:"可能是浏览器不支持，需要手动复制",type:"error",duration:1e3,position:"bottom-right",onclick:()=>{this.Copy()}})),document.body.removeChild(e),t.focus(),n},DownFile:async function(){t.get("/api/sub/"+this.token).then((e=>{this.createAndDownloadFile("ikun.yml",e.data),o({title:"下载成功",type:"success",duration:3e3,position:"bottom-right",showClose:!0})})).catch((e=>{console.log(e),o({title:"下载失败",type:"error",duration:3e3,position:"bottom-right",showClose:!0})}))},createAndDownloadFile(e,t){var o=document.createElement("a"),n=new Blob([t]);o.download=e,o.href=URL.createObjectURL(n),o.click(),URL.revokeObjectURL(n)}}};const w={class:"card-header"},f=c("span",{class:"el-dropdown-link"},[c("h3",null,"帮助")],-1),y={href:"/help/Windows.html"},k={href:"/help/Android.html"},b={id:"link"},v={class:"button"};g.render=function(e,t,o,g,C,x){const _=a("el-dropdown-item"),L=a("el-dropdown-menu"),E=a("el-dropdown"),A=a("el-card"),j=a("el-button"),D=a("el-col"),F=a("el-row"),R=p("loading");return i(),n(F,null,{default:s((()=>[l(D,{span:24},{default:s((()=>[d((i(),r("div",null,[l(A,{shadow:e.always,"body-style":{padding:"50px"},class:"box-card"},{header:s((()=>[c("div",w,[c("span",null,h(C.message),1),l(E,{trigger:"click"},{dropdown:s((()=>[l(L,null,{default:s((()=>[c("a",y,[l(_,{class:"clearfix"},{default:s((()=>[u(" 如何在Win上使用 ")])),_:1})]),c("a",k,[l(_,{class:"clearfix"},{default:s((()=>[u(" 如何在Android上使用 ")])),_:1})])])),_:1})])),default:s((()=>[f])),_:1})])])),default:s((()=>[c("div",b,h(C.link),1)])),_:1},8,["shadow"]),c("div",v,[d(l(j,{onClick:x.DownFile,type:"success",round:""},{default:s((()=>[u("下载配置文件")])),_:1},8,["onClick"]),[[m,C.show]])])])),[[R,C.loading]])])),_:1})])),_:1})};export{g as default};
