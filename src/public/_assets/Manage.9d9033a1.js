import{a as e}from"./axios.5682ea03.js";import{r as a,c as l,a as s,w as r,b as d,d as t,o,e as i}from"./index.473ba10e.js";var m={name:"UserManage",data:()=>({users:[],addUserDialogVisible:!1,addUserForm:{mail:""}}),methods:{async getUsers(){try{const l=await e.get("/SuperAdmin/getUsers");200==l.data.code?this.users=l.data.result:a.push("/SuperAdmin/login")}catch(e){console.error(e)}},async addUser(){try{const a=await e.post("/SuperAdmin/addUser",this.addUserForm);this.users.push(a.data.result),this.addUserDialogVisible=!1,this.resetAddUserForm()}catch(e){console.error(e)}},async deleteUser(a){console.log("mail:"),console.log(a);try{await e.post("/SuperAdmin/deleteUser",{mail:a}).then((e=>{200==e.data.code?this.users=this.users.filter((e=>e.mail!=a)):alert("删除失败")}))}catch(e){console.error(e)}},resetAddUserForm(){this.addUserForm={mail:""}}},mounted(){this.getUsers()}};const n=d("div",{style:{height:"60px"}},null,-1);m.render=function(e,a,m,u,c,p){const U=t("el-input"),h=t("el-form-item"),b=t("el-form"),f=t("el-button"),g=t("el-dialog"),y=t("el-table-column"),V=t("el-table");return o(),l("div",null,[s(g,{title:"添加用户",modelValue:c.addUserDialogVisible,"onUpdate:modelValue":a[2]||(a[2]=e=>c.addUserDialogVisible=e),"before-close":p.resetAddUserForm},{default:r((()=>[s(b,{model:c.addUserForm,"label-width":"80px"},{default:r((()=>[s(h,{label:"邮箱",prop:"email"},{default:r((()=>[s(U,{modelValue:c.addUserForm.mail,"onUpdate:modelValue":a[0]||(a[0]=e=>c.addUserForm.mail=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),d("div",null,[s(f,{onClick:a[1]||(a[1]=e=>c.addUserDialogVisible=!1)},{default:r((()=>[i("取消")])),_:1}),s(f,{type:"primary",onClick:p.addUser},{default:r((()=>[i("添加")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close"]),s(V,{data:c.users,style:{width:"100%"}},{default:r((()=>[s(y,{prop:"id",label:"ID"}),s(y,{prop:"mail",label:"邮箱"}),s(y,{label:"操作"},{default:r((({row:e})=>[s(f,{type:"danger",onClick:a=>p.deleteUser(e.mail)},{default:r((()=>[i(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n,s(f,{type:"primary",onClick:a[3]||(a[3]=e=>c.addUserDialogVisible=!0)},{default:r((()=>[i(" 添加用户 ")])),_:1})])};export{m as default};
